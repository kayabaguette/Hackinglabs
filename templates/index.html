{% extends "layout.html" %}

{% block content %}
<div class="container-fluid vh-100 d-flex flex-column p-0">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-secondary bg-opacity-25 px-3">
        <a class="navbar-brand" href="#">CTF Ops Center</a>
        <div class="ms-auto">
            <span class="badge bg-success" id="connection-status">Connected</span>
        </div>
    </nav>

    <div class="row g-0 flex-grow-1">
        <!-- Sidebar -->
        <div class="col-md-2 bg-black border-end border-secondary p-3">

            <!-- Quick SSH -->
            <h5 class="text-secondary text-uppercase fs-6">Quick SSH</h5>
            <div class="input-group mb-3">
                <input type="text" class="form-control form-control-sm bg-dark text-light border-secondary" placeholder="user@ip" id="ssh-target">
                <button class="btn btn-sm btn-primary" id="btn-quick-ssh">Connect</button>
            </div>

            <hr class="border-secondary">

            <!-- Tools -->
            <h5 class="text-secondary text-uppercase fs-6">Tools</h5>

            <!-- WebDAV -->
            <div class="card bg-dark border-secondary mb-3">
                <div class="card-header p-2 text-white small">WebDAV</div>
                <div class="card-body p-2">
                    <div class="input-group input-group-sm mb-2">
                        <span class="input-group-text bg-secondary border-secondary text-light">Port</span>
                        <input type="number" class="form-control bg-black text-light border-secondary" id="webdav-port" value="8080">
                    </div>
                    <div class="d-grid">
                        <button class="btn btn-sm btn-outline-warning" id="btn-webdav-toggle">Start WebDAV</button>
                    </div>
                    <div class="mt-2 small text-muted" id="webdav-status">
                        Status: Stopped
                    </div>
                </div>
            </div>

            <!-- VPN -->
            <div class="card bg-dark border-secondary mb-3">
                <div class="card-header p-2 text-white small">VPN</div>
                <div class="card-body p-2">
                    <select class="form-select form-select-sm bg-black text-light border-secondary mb-2" id="vpn-config-select">
                        <option value="">Select Config...</option>
                    </select>
                    <div class="d-grid">
                        <button class="btn btn-sm btn-outline-info" id="btn-vpn-connect">Connect VPN</button>
                    </div>
                </div>
            </div>

            <!-- Target / Nmap -->
            <h5 class="text-secondary text-uppercase fs-6">Target Scan</h5>
            <div class="mb-3">
                <input type="text" class="form-control form-control-sm bg-dark text-light border-secondary mb-2" placeholder="Nmap Command" id="nmap-command" value="nmap -sC -sV ">
                <div class="d-grid">
                    <button class="btn btn-sm btn-danger" type="button" id="btn-nmap-run">Run Scan</button>
                </div>
            </div>

            <hr class="border-secondary">

            <h5 class="text-secondary text-uppercase fs-6">Active Terminals</h5>
            <div class="list-group list-group-flush" id="session-list">
                <!-- Tabs injected here -->
            </div>
            <button class="btn btn-sm btn-success mt-2 w-100" id="btn-new-term">+ New Terminal</button>
        </div>

        <!-- Terminal Area -->
        <div class="col-md-10 d-flex flex-column bg-dark position-relative" id="terminals-wrapper">
            <!-- Terminals injected here -->
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/terminal.js') }}"></script>
{% endblock %}
